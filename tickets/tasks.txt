ЗАДАЧИ К ВЫПОЛЕННИЮ НА РАБОЧЕМ СТОЛЕ
Как было:
Для каждого периода(день-неделя-месяц) выводилось количество всех активных на данный момент задач(не завершенные)(T.ACCOUNT_ID= ? AND T.STATUS = 0). То же самое число выводилось и в статистику по предыдущему периоду(в нижней левой части блока). При нажатии на цифру подставляется фильтр незавершенные.

Как сделано:
Для каждого периода выводится количество задач со сроком выполнения(END_DATE) до конца текущего периода(конец недели, конец месяца)(T.ACCOUNT_ID= ? AND T.STATUS = 0 AND T.END_DATE < ?). В статистику по предыдущему периоду попадает число задач со сроком выполнения до конца прошлого аналогичного периода(неделя - конец прошлой недели, месяц - конец прошлого месяца. При нажатии на цифру подставляется фильтр незавершенные + дата окончания выбранного периода

Привет! При выводе количества ЗАДАЧ К ВЫПОЛНЕНИЮ на рабочем столе добавил проверку по окончанию срока выполнения( < T.END_DATE - при запросе в базу) для режимов день-неделя-месяц. Сергей Голованевский при согласовании сказал попросить тебя проверить производительность с моими правками.


EXPLAIN SELECT COUNT(*) as count FROM qcrm_tasks as T WHERE T.ACCOUNT_ID= 13675857 AND T.STATUS = 0 AND T.END_DATE < 2019-09-21 23:59:00
